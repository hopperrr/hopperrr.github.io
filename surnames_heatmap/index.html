<!DOCTYPE html>
<html>
<head>
    <title>Heatmap of Italian Surnames </title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="awesomplete.css" />
    <link
        rel="stylesheet"
        href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
    />
</head>

<body>
	<input id="myinput" />
  <input type=button onClick="parent.location='index.html'" value='New Surname Search'>
    <p id="demo"></p>
      <div id="map" style="width: 1200px; height: 1200px; z-index: -200; position: absolute"></div>
    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"> </script>
    <script src="http://leaflet.github.io/Leaflet.heat/dist/leaflet-heat.js"> </script>
    <script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.3.0"></script>
    <script src="awesomplete.js" async></script>
	<script src="awes.js"></script>
	<script src="./scripts/blank.js"></script>

    <script>

    var map = L.map('map').setView([41.5,12.39], 7);
    var layer = new L.StamenTileLayer("toner-lite");
    map.addLayer(layer);
    //mapLink = '<a href="http://openstreetmap.org">OpenStreetMap</a>';
    //L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {attribution: '&copy; ' + mapLink + ' Contributors', maxZoom: 18, }).addTo(map);
	//var heat = L.heatLayer(locat,{radius: 10, minOpacity: 50, blur: 30, maxZoom: 15}).addTo(map);
	//code so that things wait for src to fully load
    function includeJs(jsFilePath) {
    	var js = document.createElement("script");
    	js.type = "text/javascript";
    	js.src = jsFilePath;
		document.body.appendChild(js);
	}
	var input = document.getElementById("myinput");
	var awesomplete = new Awesomplete(input);
	awesomplete.list = awe;
	document.getElementById('myinput').addEventListener("awesomplete-select", function(event) {var locat_find = './scripts/' + event.text.value + '.js';

	(function(d, script) {
    	script = d.createElement('script');
    	script.type = 'text/javascript';
    	script.async = true;
    	script.onload = function(){
		var heaters = new L.FeatureGroup();

		var heat = L.heatLayer(locat,{radius: 10, minOpacity: 50, blur: 30, maxZoom: 10,}).addTo(map);
    document.getElementById('myinput').disabled = true;

    	};
    	script.src = locat_find;
    	d.getElementsByTagName('head')[0].appendChild(script);
		}(document));

	});
    </script>
</body>
</html>
